<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Formulier</title>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-9">
                <div class="row">
                    <div class="col-12">
                        <h1>Registreer</h1>
                        <p>Meld je aan bij Anoroc Services, wij beschermen jouw software tegen malware!</p>
                    </div>
                </div>
                <div class="row">
                    <form class="col-12 mt-3" name="formulier">
                        <div class="row">
                            <div class="col-6">
                                <label for="voornaam">Voornaam</label>
                                <input type="text" name="voornaam" class="form-control" id="voornaam" placeholder="Uw voornaam">
                            </div>
                            <div class="col-6">
                                <label for="naam">Naam</label>
                                <input type="text" name="naam" class="form-control" id="naam" placeholder="Uw naam">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <label for="gebruikersnaam">Gebruikersnaam</label>
                                <div class="input-group mb-2">
                                    <div class="input-group-gebruikersnaam">
                                        <div class="input-group-text">@</div>
                                    </div>
                                    <input type="text" name="gebruikersnaam" class="form-control" id="gebruikersnaam" placeholder="u911236">
                                </div>
                            </div>
                            <div class="col-6">
                                <label for="email">Email</label>
                                <input type="email" name="email" class="form-control" id="email" placeholder="mail@example.be">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <label for="wachtwoord">Wachtwoord</label>
                                <input type="password" name="wachtwoord" class="form-control" aria-describedby="passwordHelp" id="wachtwoord">
                                <small id="passwordHelp" class="form-text text-muted">Je wachtwoord moet minstens 8 tekens lang zijn.</small>
                            </div>
                            <div class="col-6">
                                <label for="wachtwoordHerhaling">Herhaal wachtwoord</label>
                                <input type="password" name="wachtwoordHerhaling" class="form-control" id="wachtwoordBevestiging">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <label for="adres">Adres</label>
                                <input type="text" name="adres" class="form-control" id="adres" placeholder="Uw adres en huisnummer">
                            </div>
                        </div>
                        <br>
                        <div class="form-row">
                            <div class="col-5">
                                <label class="form-check-label" for="Land">Land</label>
                                <select class="form-control" name="Land" id="Land">
                                        <option value="" selected>Kies een land</option>
                                        <option value="Belgie">BelgiÃ«</option>
                                        <option value="Nederland">Nederland</option>
                                    </select>
                            </div>
                            <div class="col-4">
                                <label class="form-check-label" for="provincie">Provincie</label>
                                <select class="form-control" name="provincie" id="provincie">
                                        <option value="" selected>Kies een provincie</option>
                                        <option value="antwerpen">Antwerpen</option>
                                        <option value="limburg">Limburg</option>
                                        <option value="vlaams-brabant">Vlaams-Brabant</option>
                                        <option value="oost-vlaanderen">Oost-Vlaanderen</option>
                                        <option value="west-vlaanderen">West-Vlaanderen</option>
                                        <option value="noord-brabant">Noord-Brabant</option>
                                        <option value="zeeland">Zeeland</option>
                                    </select>
                            </div>
                            <div class="col-3">
                                <label class="form-check-label" for="postcode">Postcode</label>
                                <input type="number" name="postcode" class="form-control" id="postcode">
                            </div>
                        </div>
                        <hr>
                        <div class="form-group row">
                            <div class="col-6">
                                <h3>Hou me op de hoogte</h3>
                                <div>
                                    <input type="checkbox" class="form-check-input" name="InputNieuwsbrief">
                                    <label for="nieuwsbrief" class="form-check-label">Inschrijven voor onze nieuwsbrief</label>
                                </div>
                                <div>
                                    <input type="checkbox" class="form-check-input" name="InputAlgemeneVoorwaarden">
                                    <label for="algemeneVoorwaarden" class="form-check-label">Ik ga akkoord met de Algemene voorwaarden</label>
                                </div>
                            </div>
                            <div class="col">
                                <h2>Betaling</h2>
                                <div>
                                    <input type="radio" class="form-check-input" id="PaymentRadio1" name="gridRadios" value="app" checked>
                                    <label for="app" class="form-check-label">Banking app</label>
                                </div>
                                <div>
                                    <input type="radio" class="form-check-input" id="PaymentRadio2" name="gridRadios" value="overschrijving">
                                    <label for="overschrijving" class="form-check-label">Overschrijving</label>
                                </div>
                                <div>
                                    <input type="radio" class="form-check-input" id="PaymentRadio3" name="gridRadios" value="visa">
                                    <label for="Visa" class="form-check-label">Visa card</label>
                                </div>
                                <div>
                                    <input type="radio" class="form-check-input" id="PaymentRadio4" name="gridRadios" value="PayPal">
                                    <label for="PayPal" class="form-check-label">PayPal</label>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <div class="form-group row my-5">
                            <div class="col-12">
                                <button id="knop" class="btn btn-primary w-100">Wave your magic wand</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-3 mt-3">
                <div class="alert alert-danger" role="alert" id="divErrors">
                    <h4>Yikes, errors..</h4>
                    <p id="errors"></p>
                </div>
                <div class="alert alert-success" role="alert" id="divSucces">
                    <h4>Goed gedaan!</h4>
                    <p>Aww yeah, je werd geregistreerd.</p>
                </div>
                <div class="alert alert-primary" role="alert" id="divBetaling">
                    <h4>Betalingswijze</h4>
                    <p id="betaalwijze"></p>
                </div>
            </div>
        </div>
    </div>

    <script>

        //algemene variabele
        let errors = [];
        let errorsText = "";

        //In deze functie verbergen we de alerts bij het laden van de pagina
        document.body.addEventListener("load", paginaLaden(), false);

        function paginaLaden() {
        
            document.querySelector("#divErrors").style.display = 'none';
            document.querySelector("#divSucces").style.display = 'none';
            document.querySelector("#divBetaling").style.display = 'none';
            if (errorsText != "") {
                errorsText = "";
            }
        }

        function validateForm() {
            paginaLaden();

            var Voornaam = document.forms["formulier"]["voornaam"].value;
            let Naam = document.forms["formulier"]["naam"].value;
            let Gebruikersnaam = document.forms["formulier"]["gebruikersnaam"].value;
            let Mailadres = document.forms["formulier"]["email"].value;
            let Adres = document.forms["formulier"]["adres"].value;
            let Land = document.forms["formulier"]["Land"].value;
            let Provincie = document.forms["formulier"]["provincie"].value;
            let Postcode = document.querySelector('#postcode').value;
            let Betaal = document.querySelector("#betaalwijze").textContent = validatePayment("gridRadios"); 
        
            //controle op lege velden
            checkEmptyField(Voornaam, "Het veld voornaam is vereist!");
            checkEmptyField(Naam, "Het veld naam is vereist!");
            checkEmptyField(Gebruikersnaam, "Het veld gebruikersnaam is vereist!");
            checkEmptyField(Adres, "Adres is vereist!");
            checkEmptyField(Land, "Land is vereist!");
            checkEmptyField(Provincie, "Provincie is vereist!");


            //controle op de juistheid van het mailadres
            if (checkEmptyField(mail, "Het veld e-mail is vereist.") == false) {
                if (ValidateEmail(mail) == false) {
                    errors.push('Het veld e-mail bevat fouten.');
                }
            }

            //controle op wachtwoord
            checkWachtwoord();

            //controle algemene voorwaarden
            checkAlgemeneVoorwaarden();

            //Errors opgenomen in error
            if (errors.length > 0) {
                // 1) array overlopen
                for (i = 0; i < errors.length; i++) {
                    var fout = errors[i]
                    // 2) voegt array toe aan tekstvariabele
                    errorsText += fout + "<br>";
                }
                document.getElementById("errors").textContent = "";
                // 3) inhoud tekstvariabele toevoegen aan de divErrors dus de p tag
                document.getElementById("errors").innerHTML = errorsTxt; 
            } else {
                // 4) maakt de div alert success zichtbaar
                document.getElementById("divSucces").style.display = 'inherit';
            }

            //als de array niet leeg is
            if (errors.length > 0) { 
                document.querySelector("#divErrors").style.display = 'inherit'; //zichtbaar
                document.querySelector("#divSucces").style.display = 'none'; //onzichtbaar
                document.querySelector("#divBetaling").style.display = 'none'; //onzichtbaar
                //maakt de array errors opnieuw leeg
                errors = []; 
            } else {
                document.querySelector("#divErrors").style.display = 'none'; //onzichtbaar
                document.querySelector("#divSucces").style.display = 'inherit'; //zichtbaar
                document.querySelector("#divBetaling").style.display = 'inherit'; //zichtbaar
            }

        } 
        
       //button functie toevoegen
        document.getElementById('knop').addEventListener("click", validateForm);



        //In deze functie controleren we op lege velden
        function checkEmptyField(veld, melding) {
            let lengte = veld.length;

            if (lengte === 0) {
                return true;
            } else {
                errors.push(melding);
                return false;
            }
        }

        //In deze functie controleren we het e-mailadres
        //https://www.simplilearn.com/tutorials/javascript-tutorial/email-validation-in-javascript
        function ValidateEmail(email) {
            let emailRegex = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;

            if (email.match(emailRegex)) {
                return true;
            } else {
                return false;
            }
        }


        //In deze functie controleren we het wachtwoord. We controleren eerst of deze velden zijn ingvuld.
        //Vervolgens of de waarde van beide velden overeen komen.
        function checkWachtwoord() {
            let Wachtwoord = document.forms["formulier"]["wachtwoord"].value;
            let HerhaalWachtwoord = document.forms["formulier"]["wachtwoordHerhaling"].value;

            checkEmptyField(Wachtwoord, "Het veld wachtwoord is vereist.");
            checkEmptyField(Herhaalwachtwoord, "Het veld herhaal wachtwoord is vereist.");

            if (Wachtwoord.length <= 7) {
                errors.push("het wachtwoord moet minstens 7 karakters lang zijn."); 
            } else {
                if (Wachtwoord != HerhaalWachtwoord) {
                    errors.push("Je wachtwoorden komen niet overeen.");
                }
            }
            
        }

        //In deze functie controleren we de postcode
        function checkPC(veld) {
            var postcodeRegex = /^[1-9]{1}[0-9]{3}$/;

            if (veld.match(postcodeRegex)) {
                return true;
            } else {
                errors.push("De waarde moet tussen 1000 en 9999 liggen.");
                return false;
            }
        }

        //In deze functie controleren we de radio buttons met de naam in de parameter. Deze waarde geven we terug.
        function validatePayment(veld) {
            let Radio = document.getElementsByName(veld);

            for (let i = 0; i < Radio.length; i++) {
                if (Radio[i].checked == true) {
                    let betaalwijze = "Je betalingswijze is " + Radio[i].value;  
                    return betaalwijze;
                } 
            }
            return "";
        }

        //In deze functie controleren we of vinkje van algemene voorwarden is aangevinkt
        function checkAlgemeneVoorwaarden() {
            let Voorwaarden = document.querySelector('#algemeneVoorwaarden').checked;

            if (Voorwaarden == false) {
                errors.push("Algemene voorwaarden moeten geaccepteerd worden.");
            }
        }

    </script>
</body>
</html>